## 1.网络基础知识

-   OSI参考模型：==物理层== -> ==数据链路层== -> ==网络层== -> ==传输层== -> ==会话层== -> ==表示层== -> ==应用层==
-   OSI协议以OSI参考模型为基础界定了每个阶层的协议和每个阶层之间接口相关的标准；
    -   7.应用层：针对特定应用，如电子邮件，远程登录，文件传输；
    -   6.表示层：设备固有数据格式与网络标准数据格式的转换；
    -   5.会话层：通信管理。负责建立和断开通信连接；
    -   4.传输层：管理两个节点之间的数据传输。负责可靠传输；
    -   3.网络层：地址管理与路由选择；
    -   2.数据链路层：互联设备之间传送和识别数据帧。
    -   1.物理层：物理接口，连接器；
-   TCP/IP 分层：==物理层==（以太网，无线LAN，PPP，）-->  ==网络层==（ARP，IPv4 ，IPVC6 ，ICMP）--> ==传输层== （TCP, UDP...） --> ==应用层==（SSH,HTTP,SMTP,POP)
-   WAN(Wide Area Nerwork, 广域网)
-   LAN（Local Area Nerwork，局域网）
-   分组交换: 将大数据分割为一个个包(Packet)的较小的单位进行传输;
-   传输方式：面向有连接与面向无连接型；
-   接受端数量分类：
    -   单播：就是1对1通信；
    -   广播：1对多
    -   多播：与广播类似，也是将消息发送给多个接收主机，不同之处在于多播要限定某一组主机作为接收端。虽然一对多，但是限定多是谁；例如电视会议；
    -   任播：特定的多台主机中选出一台作为接收端的一种通信方式；面向多个，但最终选择单个特定主机通信；如DNS；
-   地址：每一层协议所使用的地址不尽相同；例如MAC地址，IP地址，端口号，等；
-   网络设备：
    -   网卡：使计算机联网的设备，也叫网卡，LAN卡；
    -   网桥：从数据链路层上延长网络的设备；
    -   路由：通过网络层转发分组数据的设备；
    -   交换机器：处理传输层以上各层网络传输的设备；
-   云：利用虚拟化技术，根据需要自动进行动态管理分配计算机资源（存储，CPU，内存等）

## 2.TCP/IP 基础

-   RFC（Request For Comment）文档，记录协议规范内容；http://www.rfc-editor.org/rfc/   ftp://ftp.rfc-deitor.org/in-notes/
-   The Internet：互联网
-   TCP/IP 的分层模型：
    -   物理层和网络接口层：网卡及接口；
    -   网络层：IP，ICMP，ARP
    -   传输层：TCP，UDP
    -   应用层：HTTP(HyperText Transfer Protocol),FTP(File Transfer Prototol),SSH...
-   每个分层中，都会对所发送的数据附加一个首部，在这个首部中包含了该层必要的信息；
-   


## 3.数据链路

数据链路层的协议定义了通过通信媒介互联的设备之间传输的规范。

-   MAC地址：用于识别数据链路中互联的节点；
    -   由于MAC地址没有层次性, 当设备数量增加时, 检索转发表的时间越长, 所以需要网络层IP地址对地址进行分割;

## 4.IP协议

网络层协议，主要作用是“实现终端节点之间的通信”。

### 1. IP协议基础

-   主机：一般将配有IP地址，但不进行路由控制的设备；
-   路由：即配有IP地址，又具有路由控制能力的设备叫做“路由器”
-   节点：路由和主机的统称；
-   路由控制（routing）：指将分组数据发送到最终目标地址的功能；
-   Hop：跳，指网络中的一个区间；一跳指利用数据链路层以下分层的功能传输数据帧的一个区间；
-   路由控制表：Routing Table，主机维护, 记录IP数据在下一步应该发给哪一个路由器;
-   IP属于面向无连接型：原因有两点，一是为了提速，二是为了简化；
-   IP地址由==网络==和==主机==两部分标识组成；相同段内相连的主机必须有相同的网络地址，IP地址的主机标识则不允许在同一个网段内重复出现；
    -   子网掩码用于区分网络标识和主机标识;
-   广播地址：==将主机地址部分为全部置为1==
    -   本地广播：在本网内的广播叫做本地广播，(路由器不会转发)
    -   直接广播：不同网络间的广播；叫做直接广播；(先到达路由器, 路由器进行广播)
-   IP多播：用于将包发送给特定组内的所有主机，多播使用D类地址，开始四位是“1110”就可以认为是多播地址；`224.xxx.xxx.xxx`
-   子网掩码：IP地址==网络部分全部为1==，对应IP地址==主机部分全部为0==；
-   生存时间：TTL，指可以中转多少个路由器，经过一个TTL减1，直到为0丢弃；

### ２.IP协议相关

- DNS: Domain Name System,域名解析, 解决IP地址不便记忆;
  - 查询过程：向默认的DNS服务器发起查询，知道与否？向上一层根域名服务器进行查询.
- ARP: 以IP地址为线索, 查询MAC地址; 
- 为什么需要IP地址和MAC地址:
  - 1.使用IP地址,可以由网络部分充当提供位置的作用, 对地址进行集约;
  - 2.IP地址只是逻辑上的标识, 任何人都可以随意修改, 不用用于标识用户, 而MAC地址则不然, 它是固话在网卡里. 局域网采用MAC地址来标识具体用户;
- RARP: Reverse Address Resolution Protocol, ARP的反过程, 通过MAC定位IP地址;
- DHCP: Dynamic Host Configuration Protocol, 自动分配IP地址;
- NAT: 网络地址转换, 将LAN端的IP和端口转换为全局的IP再发送, 

### 3.路由

> 为了让数据包正确达到目标主机, 路由器必须在途中进行正确的转发, 转发数据所进行的处理就叫路由;

- 路由器根据**路由控制表**转发数据包.
- 

## 5.TCP

### 1.基础概念

-   TCP通过一系列技术保证了数据传送的可靠性：
    -   连接管理----3次握手和4次挥手；
    -   数据破坏----校验和
    -   丢包-----应答与超时重发机制
    -   分片乱序-----序列号
    -   窗口滑动------提高发送效率，对发送端和接收端流量进行控制
    -   加快通信速度------快速重发，三次收到重发消息进行重发
    -   流控制----避免网络流量浪费
    -   拥塞控制-----慢启动算法，拥塞窗口


-   TCP：Transmission Control Protocol;是面向连接的、可靠的流协议。流就是不间断的数据结构，TCP为提供可靠性传输，实行“顺序控制”或重发控制；此外还具有流量控制，拥塞控制、提高网络利用率等众多功能；
-   TCP与UDP区别：TCP用于在传输层有必要实现可靠传输的情况，UDP主要用于那些对高速传输和实时性有较高要求的通信或广播通信；如IP电话；
-   端口号：MAC地址前者用来识别同一链路中不同的计算机，IP地址用于识别TCP/IP网络中互联的主机和路由；在传输层中也有类似地址的概念，用以区分不同的应用程序，称为端口号；
-   TCP/IP或UDP/IP 通信中通常采用5个信息来识别一个通信；它们是“源IP地址”、"目标IP地址"、"协议号"、"源端口号"、"目标端口号"；
-   端口号的确定：1.标准既定的端口号，一般是0-1023，具有特定用途；此外还有一些被正式注册，分布在2104-49151的数字之间；2.时序分配，交由操作系统动态管理，取值范围49152-65535之间；
-   不同的协议可以使用相同的端口号；


-   特点：对传输、发送、通信进行控制的协议；可以进行丢包时的重发控制，对次序乱掉的分包进行顺序控制；只能一对一；
-   通过==检验和，序列号，确认应答，重发控制，连接管理，以及窗口控制等机制实现可靠性传输==；
-   序列号：按顺序给发送数据的每个字节都标记上号码的编号；
-   确认应答：发送端的数据到达接收主机时，接收主机会返回一个已经收到消息的通知；这个消息叫确认应答；应答号为需要接收的下个数据号；
-   连接：TCP数据通信前或通过TCP首部发送一个`SYN`包作为建立连接的请求等待确认应答；需要三次；
-   断开：需要四次；请求切断，应答、请求切断，应答；
-   TCP以段为单位发送数据：称为MSS，Maximum Segment Size，最大消息长度；在连接建立时确定，取通信双方最小的；
-   窗口：无需等待确认应答而可以继续发送数据的最大值；
-   滑动窗口：收到确认应答，==将窗口滑动到确认应答中的序列号的位置==；
-   窗口在一定程度上保证，即使有少部分确认应答丢失也不会进行数据重发；（可以通过后面的应答，确认）
-   三次应答重发：如果收到三次重复应答，则将其后面的一段数据重发；
-   流控制：接收端会将根据自身情况缩小窗口，通知给发送端，从而控制数据的放松量；
-   提高网络利用率的规范：Nagle算法：等待服务器应答包到达后，再发送下一个数据包。数据在发送端被缓存，如果缓存达到指定大小就将其发送，或者上一个数据的应答包到达，将缓冲区一次性发送；
-   拥塞控制：判定拥塞出现的条件：网络中出现分组丢失；

### 1.连接和断开

-   三次握手：
    -   三次握手：1.客户端发送SYN包到主机请求建立连接；2.主机回复ACK（针对SYN的确认应答），并发送SYN请求建立连接；3.客户端回复ACK确认应答；
    -   目的：为了防止已失效的连接请求报文段突然又传到了服务端，而产生错误；
-   四次挥手：
    -   四次挥手：1.一方发送FIN请求切断连接，2.另一方针对FIN的回复ACK确认；重复；
    -   TCP是全双工模式（数据在两个方向上都能同时传递），收到`FIN`时意味着对方将没有数据再发来。而自己还可以继续发送，直到发送`FIN`到对方，发送`FIN` 一般是应用层进行关闭的结果；


## 6.UDP

-   UDP：User Datagram Protocol;UDP是不具有可靠性的数据报协议。可以确保发送消息的大小，不能保证消息一定会到达；
-   特点：不提供复杂的控制机制；无丢包重传机制，面向无连接，简单高效，可以一对一或一对多；
-   应用：
    -   1.包总量较少的通信（DNS,SNMP等）；
    -   2.视频、音频等多媒体通信（即时通信）；
    -   3.限定LAN等特定网络中的应用通信；
    -   4.广播通信（广播，多播）；

## 7.www

3个重要概念：访问信息的手段与位置URI（Uniform Resource Identifier），信息的表现形式HTML（HyperText Markup Language）以及信息转发HTTP（HyperText Transfer Protocol）；

-   URI：具体格式
    -   http://主机名、路径
    -   http://主机名：端口号/路径
    -   http://主机名：端口号/路径?访问内容#部分信息
-   HTML：是记述Web页的一种语言（数据格式）
-   HTTP：
    -   HTTP主要命令：
    -   OPTIONS：设置选项；
    -   GET：获取指定URL的数据；(最多的请求)；仅仅获取资源信息，不会影响资源状态；
    -   HEAD：仅获取文档首部；
    -   POST：请求服务器接收URI指定文档作为可执行的信息；
    -   PUT：请求服务器保存客户传送的数据到URI指定文档；
-   HTTP数据由请求行，首部字段，空行，报文主题四个部分组成；首部字段分为：通用首部字段，请求首部字段，相应首部字段，实体首部字段；
-   HTTP/1.0协议：每一个命令和应答都会触发一次TCP连接的建立和断开；
-   HTTP1.1协议：允许在一个TCP连接上发送多个命令和应答，大量减少了TCP连接的建立和断开操作；
-   状态：
    -   2xx：成功
    -   200：一切OK，会GET或POST的回应；
    -   3xx：重定向
    -   304：客户端有缓冲的文档并发出了一个条件性的请求，服务器告诉客户，原来的缓冲文档还可以使用；
    -   4xx：客户端错误
    -   403：资源不可用；
    -   404：无法找到指定位置的资源；
-   JavaScript：是一种嵌入在HTML中的编程语言，作为客户端程序可以运行于多种类型的浏览器中，这些浏览器将嵌入JavaScript的HTML下载后，其对应的JavaScript程序就可以在客户端得到执行；
-   Cookie：
-   浏览器中输入URL后发生了生么？
    -   1.DNS域名解析；过程：1.查询本地hosts文件，2本地DNS解析器缓存，3.根域名服务器，
    -   2.建立TCP连接；
    -   3.发起HTTP请求：组织一个请求的数据包，包含请求的资源路径，身份信息等，

## DNS

Domain Name System,域名系统

-   分类：根DNS服务器，顶级DNS服务器，权威DNS服务器；

-   解析过程：www.qq.com

    -   1.检查本地hosts里有没有这个域名的映射，有完成，没有向下；

    -   2.查找本地DNS解析器缓存，是否有这个网址映射？没有向下；

    -   3.向TCP/IP参数设置中的本地DNS服务器查询？（直连外网：会分配到运营商服务地址；通过路由：含有DHCP服务，可能就是路由本身）

    -   4.如果本地DNS服务器解析失败，则根据DNS设置，进行查询；（如未用转发模式，本地DNS就把请求发送至13台跟DNS，根DNS会判断该顶级域名（.com）由谁管理，并返回一个负责该顶级域名服务器的IP，本地DNS在联系这个服务器，查询到qq.com，然后重复向下查询，直到查询到www.qq.com）

    -   4.5.如果用转发模式，DNS服务器就会把请求转发至上一级服务器进行解析，直到找到；

        ![](http://www.maixj.net/wp-content/uploads/2015/10/dns.jpg)